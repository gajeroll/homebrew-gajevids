# This file was generated by GoReleaser. DO NOT EDIT.
cask "gajevids" do
  desc "YAML-based FFmpeg video composition tool"
  homepage "https://github.com/gajeroll/gajevids"
  version "0.3.14"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "gajevids"

  on_macos do
    on_intel do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.14/gajevids_0.3.14_darwin_amd64.tar.gz"
      sha256 "bf215704cd62083c67a18d1d149406d8b688722921c220e718e50fb361d42a99"
    end
    on_arm do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.14/gajevids_0.3.14_darwin_arm64.tar.gz"
      sha256 "eda5a214a6e9e3c5d1148b44a412a9e430f6fdd64944007efd069cf81dfd578c"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.14/gajevids_0.3.14_linux_amd64.tar.gz"
      sha256 "4c70454e14d3e60e71e7ba4d3eae19b92ad47b10aa7c5f3eb8b524da27105ffa"
    end
    on_arm do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.14/gajevids_0.3.14_linux_arm64.tar.gz"
      sha256 "37dbe7f12b1c4dbe9e62f26d2a66033ffe11852cface81b66f0384487c212041"
    end
  end

  postflight do
    # Remove macOS Gatekeeper quarantine flag so the wrapper can run without prompts
    if system_command("/usr/bin/xattr", args: ["-h"]).exit_status.zero?
      system_command "/usr/bin/xattr",
                     args: ["-dr", "com.apple.quarantine", "#{staged_path}/gajevids"]
    end
  end

  caveats do
    "After installing, you may need to remove quarantine attributes manually:"
    "  sudo xattr -dr com.apple.quarantine /opt/homebrew/Caskroom/gajevids/latest"
  end

  # No zap stanza required
end
