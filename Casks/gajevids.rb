# This file was generated by GoReleaser. DO NOT EDIT.
cask "gajevids" do
  desc "YAML-based FFmpeg video composition tool"
  homepage "https://github.com/gajeroll/gajevids"
  version "0.3.17"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "gajevids"

  on_macos do
    on_intel do
      url "https://github.com/gajeroll/homebrew-gajevids/releases/download/v0.3.17/gajevids_0.3.17_darwin_amd64.tar.gz",
        verified: "github.com/gajeroll/homebrew-gajevids"
      sha256 "c5729fdc88d6cfeab8292058d584d750fbe9377daee496b18c6ae3b4b2f7d864"
    end
    on_arm do
      url "https://github.com/gajeroll/homebrew-gajevids/releases/download/v0.3.17/gajevids_0.3.17_darwin_arm64.tar.gz",
        verified: "github.com/gajeroll/homebrew-gajevids"
      sha256 "9336fa61d57b7d17ab0d1b905ac1187f0d0c12cae93c674311da57c9b58c3846"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/gajeroll/homebrew-gajevids/releases/download/v0.3.17/gajevids_0.3.17_linux_amd64.tar.gz",
        verified: "github.com/gajeroll/homebrew-gajevids"
      sha256 "9dd78acd8c5c4a0e85493033e8cc31bccb729fb14737cfc19a68993402b6c4bd"
    end
    on_arm do
      url "https://github.com/gajeroll/homebrew-gajevids/releases/download/v0.3.17/gajevids_0.3.17_linux_arm64.tar.gz",
        verified: "github.com/gajeroll/homebrew-gajevids"
      sha256 "e0aa683f4260dc51957c7a3985596d679026cdd002771ee7408780f7c82e50c7"
    end
  end

  postflight do
    # Remove macOS Gatekeeper quarantine flag so the wrapper can run without prompts
    if system_command("/usr/bin/xattr", args: ["-h"]).exit_status.zero?
      system_command "/usr/bin/xattr",
                     args: ["-dr", "com.apple.quarantine", "#{staged_path}/gajevids"]
    end
  end

  caveats do
    "After installing, you may need to remove Gatekeeper quarantine attributes:"
    "  sudo xattr -dr com.apple.quarantine /opt/homebrew/Caskroom/gajevids/latest"
  end

  # No zap stanza required
end
