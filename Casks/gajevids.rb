# This file was generated by GoReleaser. DO NOT EDIT.
cask "gajevids" do
  desc "YAML-based FFmpeg video composition tool"
  homepage "https://github.com/gajeroll/gajevids"
  version "0.3.15"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "gajevids"

  on_macos do
    on_intel do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.15/gajevids_0.3.15_darwin_amd64.tar.gz"
      sha256 "fef586b4ba9ac76cfe1cfff241ab77fc933b7562f375721c14a87f5cd4d576be"
    end
    on_arm do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.15/gajevids_0.3.15_darwin_arm64.tar.gz"
      sha256 "93edb6032b75aee56b31fb2525d5e75577b2694ed1acafa18ec7c2597ddc0df1"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.15/gajevids_0.3.15_linux_amd64.tar.gz"
      sha256 "2d2cbf89db40a2307e9f61f85b521bebac7cb6fa8bd274e99c7c238222fd6df3"
    end
    on_arm do
      url "https://github.com/gajeroll/gajevids/releases/download/v0.3.15/gajevids_0.3.15_linux_arm64.tar.gz"
      sha256 "4a3bfddcb1f37b9633dc47fc33a88575b543aa5243e94e3810d0ea55759b1cfb"
    end
  end

  postflight do
    # Remove macOS Gatekeeper quarantine flag so the wrapper can run without prompts
    if system_command("/usr/bin/xattr", args: ["-h"]).exit_status.zero?
      system_command "/usr/bin/xattr",
                     args: ["-dr", "com.apple.quarantine", "#{staged_path}/gajevids"]
    end
  end

  caveats do
    "After installing, you may need to remove quarantine attributes manually:"
    "  sudo xattr -dr com.apple.quarantine /opt/homebrew/Caskroom/gajevids/latest"
  end

  # No zap stanza required
end
